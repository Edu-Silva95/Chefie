<div class="background-div">
  <div class="category-page">
    <div class="category-page__container">
      <div class="category-page__header">
        <%= link_to dashboard_index_path, class: "custom-back-btn-link" do %>
          <span class="custom-btn-inner">← Back</span>
        <% end %>
      </div>
      <h1 class="category-page__title"><%= @category %> Recipes</h1>

      <!-- Pill shaped buttons-->
      <div class="categories">
        <% ["Pizza", "Noodle", "Pasta", "Salad", "Dessert", "Cocktails"].each do |cat| %>
          <%= link_to cat, category_path(cat), class: "category-pill #{'active' if cat == @category}" %>
        <% end %>
      </div>

      <% if @recipes.any? %>
        <section class="cards-grid">
          <% @recipes.each do |recipe| %>
            <article class="card">
              <div class="card-image-wrapper">
                <% if recipe.image.attached? %>
                  <%= image_tag recipe.image, alt: "Image for #{recipe.title}", class: "card-image" %>
                <% else %>
                  <%= image_tag "placeholder.jpg", alt: "No image available", class: "card-image" %>
                <% end %>
              </div>

              <h3 class="card-title"><%= recipe.title %></h3>

              <div class="meta">
                <%= recipe.prep_time.presence || "30 mins" %> • <%= star_rating(recipe.average_rating) %>
              </div>

              <p class="card-description">
                <%= truncate(recipe.description, length: 100) %>
              </p>

              <%= link_to "View Recipe", recipe_path(recipe), class: "btn" %>
            </article>
          <% end %>
        </section>
      <% else %>
        <p>No recipes found in this category.</p>
      <% end %>
    </div>
  </div>
</div>
