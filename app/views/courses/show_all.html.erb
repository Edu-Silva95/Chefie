<div class="courses-page__show-all">
    <%= link_to courses_path, class: "custom-back-btn-link" do %>
      <span class="custom-btn-inner">← Back</span>
    <% end %>

  <h2 class="courses-page__title">All Courses</h2>
  <h3 class="courses-page__subtitle">Explore our collection of courses, videos that teach you how prepare delicious meals!</h3>

  <!-- Search Box Form -->
  <%= form_with url: show_all_courses_path, method: :get, local: true, class: 'courses-page__search-form' do %>
    <div class="courses-page__search-input-wrapper">
      <%= text_field_tag :search, params[:search], placeholder: "Search courses by name...", class: 'courses-page__search-input' %>
      <button type="submit" class="courses-page__search-button">
        <i class="fas fa-search"></i> <!-- Magnifying glass icon -->
      </button>
    </div>
  <% end %>

  <% if @courses.any? %>
    <div class="courses-page__show-all-list">
      <div class="courses-page__show-all-grid">
        <% @courses.each do |course| %>
          <div class="courses-page__course-card">
            <% if (vid = extract_youtube_id(course.youtube_url)).present? %>
              <div class="courses-page__course-card-video">
                <iframe class="courses-page__course-card-iframe" width="100%" height="200" src="https://www.youtube.com/embed/<%= vid %>" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div>
            <% elsif course.image.attached? %>
              <%= image_tag course.image.variant(resize_to_fill: [300, 200]), alt: course.name, class: "courses-page__course-card-image" %>
            <% end %>

            <div class="courses-page__course-card-body">
              <h3 class="courses-page__course-card-title"><%= course.name %></h3>
              <p class="courses-page__course-card-description"><%= truncate(course.description, length: 100) %></p>
              <div class="courses-page__course-card-actions">
                <div class="courses-page__course-card-actions">
                  <%= link_to "View Course", course_path(course), class: "courses-page__course-card-view-btn" %>
                </div>
                <% if course.user == current_user %>
                  <div class="courses-page__course-card-delete-wrapper">
                    <%= button_to "×", course_path(course), method: :delete, data: { confirm: "Are you sure you want to delete this video?" }, class: "courses-page__course-card-delete-x" %>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <p class="courses-page__empty-state">No courses available.</p>
  <% end %>
</div>
